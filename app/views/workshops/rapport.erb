<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>BreakFast by Free Css Templates</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<style type="text/css" media="screen">
/********* GLOBAL SETTINGS **********/
*{
	margin:0; 
	padding:0; 
	font-size:100%; 
	font-family:Arial, Helvetica, sans-serif;
	line-height:1.5em;
	font-weight:400;
	list-style:none;
}

html, body {
	height: 100%;
}

img{
	border:none;
}
a{
	outline:none;
}

h2{
	font-size:16px;
	font-weight:bold;
}

/*************************************/


/********** BODY BACKGROUND **********/
body{
	background-color:#FEFEFE;
}

/*************************************/
		
  .top-title{
		color:#111; 
		font-size:1.4em; 
		text-transform:uppercase; 
		padding:10px 10px 2px 10px;
		font-weight:bold;
		background:url(<%= image_path("#{RAILS_ROOT}/public/images/structure/divider.png") %>) no-repeat bottom left;
		margin-bottom:8px;
	}
	
	.list-table {
	border-collapse:collapse;
	margin:0px auto; 
	width:98%; 
	border:1px solid grey;
	/*border-color:#595959;*/
}

.list-table tr.active td{
	font-size:0.9em; 
	background:#EDEDED;
}

.list-table th, .mini-.list-table th {
	color:#DDD;
	padding:5px;
	background-color: #595959;
	text-align:left; 
	font-weight:bold;
	color:#FFF;
	border:solid 1px #595959;
}

.list-table td {
	padding:10px; 
	color:#111;
	border:solid 1px #595959;
}
.list-table td.sub {
	padding-left:15px;
	text-align:left;
}

.list-table tr.odd td {
	background:url(<%= image_path("#{RAILS_ROOT}/public/images/structure/bg-td.png") %>) repeat-x scroll 0 100% transparent;
}
</style>

</head>
<body>

<h2 class="top-title">Fiche de pointage du <%= Date.today.beginning_of_week.strftime("%d") %> au <%= Date.today.end_of_week.strftime("%d %B %Y") %> || <%= @team.workshop.workshop_name %> | <%= @team.team_name %></h2><br />

<table class="list-table">
	<thead>
		<tr>				
			<th width="16%">Nom</th>	
				<th width="12%">Lundi</th>
				<th width="12%">Mardi</th>			
				<th width="12%">Mercredi</th>
				<th width="12%">Jeudi</th>
				<th width="12%">Vendredi</th>
				<th width="12%">Samedi</th>
				<th width="12%">Dimanche</th>
		</tr>
	</thead>
	<tbody>
		<% if @casuals.empty? %>
			<tr>
				<td colspan = 8 class = "ui-widget-content" >Aucun temporaire à pointer</td>									
			</tr>
		<% else %>
			<% @casuals.each do |casual| %>				
				<%= hidden_field_tag casual.id %>
				<tr class = "odd">
					<td class = "ui-widget-content">
						<%= casual.firstname+ " "+casual.lastname %>
					</td>																				
<!-- On est lundi ou mardi: Si le temporaire n'a pas encore été pointé cette semaine, on affiche le nombre d'heures de la configuration -->
							<% if casual.tickings.find_by_week_number(@week_number).nil? %>
								<td class = "ui-widget-content">
									0
								</td>
								<td class = "ui-widget-content">
									0
								</td>
								<td class = "ui-widget-content">
									0
								</td>
								<td class = "ui-widget-content">
									0
								</td>
								<td class = "ui-widget-content">
									0
								</td>
								<td class = "ui-widget-content">
									0
								</td>
								<td class = "ui-widget-content">
									0
								</td>								
							<% else %>
	<!-- Le temporaire a été pointé cette semaine: Si le temporaire n'a pas été pointé le lundi, on affiche le nombre d'heures de la configuration -->												
								<% if casual.tickings.find_by_week_number(@week_number).monday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>								
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est différente de celle dans laquelle il est; se contenter d'afficher le nombre d'heures précédemment pointé -->
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.monday_ticking.team_id != casual.team_id %>
										<td class = "ui-widget-content">
											<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.monday_ticking.number_of_hours %>															
											<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.monday_ticking.team_id).team_name %></div>
									</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).monday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
								<% if casual.tickings.find_by_week_number(@week_number).tuesday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.tuesday_ticking.team_id != casual.team_id %>
											<td class = "ui-widget-content">
												<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.tuesday_ticking.number_of_hours %>															
												<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.tuesday_ticking.team_id).team_name %></div>
										</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).tuesday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
								<% if casual.tickings.find_by_week_number(@week_number).wednesday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.wednesday_ticking.team_id != casual.team_id %>
											<td class = "ui-widget-content">
												<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.wednesday_ticking.number_of_hours %>															
												<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.wednesday_ticking.team_id).team_name %></div>
										</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).wednesday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
								<% if casual.tickings.find_by_week_number(@week_number).thursday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.thursday_ticking.team_id != casual.team_id %>
											<td class = "ui-widget-content">
												<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.thursday_ticking.number_of_hours %>															
												<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.thursday_ticking.team_id).team_name %></div>
										</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).thursday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
								<% if casual.tickings.find_by_week_number(@week_number).friday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.friday_ticking.team_id != casual.team_id %>
											<td class = "ui-widget-content">
												<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.friday_ticking.number_of_hours %>															
												<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.friday_ticking.team_id).team_name %></div>
										</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).friday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
								<% if casual.tickings.find_by_week_number(@week_number).saturday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.saturday_ticking.team_id != casual.team_id %>
											<td class = "ui-widget-content">
												<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.saturday_ticking.number_of_hours %>															
												<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.saturday_ticking.team_id).team_name %></div>
										</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).saturday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
								<% if casual.tickings.find_by_week_number(@week_number).sunday_ticking.nil? %>
									<td class = "ui-widget-content">
										0
									</td>
								<% else %>
									<% if casual.tickings.where("week_number = #{@configuration.first.week_number}").first.sunday_ticking.team_id != casual.team_id %>
											<td class = "ui-widget-content">
												<%= casual.tickings.where("week_number = #{@configuration.first.week_number}").first.sunday_ticking.number_of_hours %>															
												<div style="font-size:60%;"><%= Team.find(casual.tickings.where("week_number = #{@configuration.first.week_number}").first.sunday_ticking.team_id).team_name %></div>
										</td>
									<% else %>
	<!-- Le temporaire a été pointé le lundi: Si l'équipe dans laquelle il a été pointé est la meme que celle dans laquelle il est; afficher une combo box de sélection des heures -->														
										<td class = "ui-widget-content">
											<%= casual.tickings.find_by_week_number(@week_number).sunday_ticking.number_of_hours %>
										</td>
									<% end %>
								<% end %>
								
							<% end %> 																									
				</tr>
			<% end %>
		<% end %>
	</tbody>
</table>	

</body>
</html>
